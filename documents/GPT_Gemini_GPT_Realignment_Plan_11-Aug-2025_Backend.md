# RIA Hunter Implementation Plan (Backend and Frontend)

## Project Overview (Common Context)

RIA Hunter is being enhanced with **Supabase-based Google authentication** and a **Stripe-powered subscription model**. The goal is to implement a freemium model where free users can perform limited queries (2 per month, with a possible \+1 bonus for sharing on LinkedIn) and are prompted to upgrade to a paid **Pro plan** (with a 7-day free trial) for unlimited access[\[1\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L34-L41)[\[2\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L42-L50). This requires coordinated updates to both the backend (APIs, database, auth) and the frontend (UI elements, user flows) – **both must function correctly for the MVP to succeed**. A robust backend without a UI leaves users confused, and a polished frontend without a working backend fails to deliver results. Therefore, we outline a plan for each project, clarifying responsibilities so there is no overlap or confusion about who does what.

**Key Architecture Points:** The backend (**Turnstyle/ria-hunter**) provides Next.js API routes (no public UI) for data queries and subscription management, using **Supabase (Postgres)** for data storage and auth, and **Stripe** for payment processing[\[3\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/docs/refactor/Master_Plan_RIA-Hunter-App.md#L99-L108)[\[4\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/docs/refactor/Master_Plan_RIA-Hunter-App.md#L114-L123). The frontend (**Turnstyle/ria-hunter-app**) is a Next.js 14 React application that will use these APIs and handle user interaction. Both systems use the **Supabase user ID** as the single source of truth for user identity – all subscription records are keyed by this ID (which corresponds to the auth.users table in Supabase)[\[5\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L54-L61)[\[6\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L20-L28). This means we **do not rely on email matching** for linking Stripe subscriptions to users; instead, the backend tags Stripe Checkout sessions with the user’s UUID and stores it in the subscriptions table[\[7\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L54-L62)[\[8\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L78-L86).

Below is the detailed plan, first for the backend and then for the frontend, with shared context in mind. Each section contains the tasks and considerations specific to that project, along with references to documentation or code to guide the implementation.

## Plan for **RIA-Hunter (Backend)**

*Responsibilities:* The backend is responsible for authenticating requests, enforcing usage limits, and managing subscription status. Much of this has already been implemented according to the design specifications[\[9\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L5-L13)[\[2\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L42-L50). The backend agent’s main tasks are to verify and finalize these features, handle any necessary configuration, and ensure the frontend can reliably integrate with the provided APIs. Key features and steps include:

* **Supabase Auth Integration:** The backend now uses Supabase for authentication (replacing the old Auth0 mechanism). In the Next.js middleware.ts, incoming requests are validated using the Supabase JWT token. If a request has a Bearer token, the middleware calls supabaseAdmin.auth.getUser(token) to verify it and retrieve user info[\[10\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L88-L96). On success, the middleware attaches the user’s ID and email to the request (via headers like x-user-id) for use in API routes[\[11\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L10-L18). This ensures all protected endpoints know the authenticated user’s identity. (Auth0-specific code and configuration have been removed, and only Supabase’s JWT validation is performed[\[12\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L94-L101).)

* **User Identity & Database Links:** As noted, **user identity is unified by the Supabase user UUID**. All new backend tables reference auth.users(id). For example, the subscriptions table uses user\_id UUID PRIMARY KEY REFERENCES auth.users[\[5\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L54-L61) to tie Stripe subscriptions to the exact Supabase user. We attach this user\_id to Stripe transactions: when creating a checkout session, the code includes client\_reference\_id: userId and also sets metadata.user\_id on the Stripe subscription data[\[7\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L54-L62). On the Stripe webhook side, the backend reads back the user\_id from session.client\_reference\_id or subscription metadata to update the correct user’s record[\[8\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L78-L86). This design means **we do not attempt to match on email addresses at all** – the unique Supabase UID is the sole key linking a Stripe customer/subscription to our internal user[\[6\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L20-L28).

* **Database Schema & Tables:** The necessary tables for tracking usage and subscriptions have been created in Supabase (via a migration script). These include:

* user\_queries – logs each query invocation (for usage counting).

* user\_shares – logs when a user redeems the LinkedIn share bonus.

* subscriptions – stores the user’s subscription status (trial, active, etc.) and Stripe identifiers[\[5\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L54-L61).  
  All tables reference auth.users for the user\_id and have appropriate indexes and (if applicable) Row-Level Security policies so users can only read their own data[\[13\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L40-L48)[\[14\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L54-L62). With RLS in place, even if the frontend queries Supabase directly for usage, each user can only see their own counts[\[15\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L6-L14).

* **Usage Limit Enforcement:** The backend implements the **free tier usage limits**. Specifically, the /api/ask endpoint (which handles natural language queries) has been enhanced to check how many queries the user has made this month. Before processing a query, it counts the records in user\_queries for the current user in the current month, and likewise checks user\_shares for a bonus[\[16\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L38-L46)[\[17\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L58-L66). The free allowance is **2 queries per month \+ 1 bonus** if a share record exists (at most one bonus)[\[17\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L58-L66). If the user is **not** a subscriber and has reached their limit, the API will return an error (HTTP 403\) indicating the limit is reached and suggesting an upgrade or share action[\[1\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L34-L41). If under the limit (or the user is a Pro subscriber), the query proceeds and the backend logs the usage by inserting a new user\_queries row. This ensures the limit is enforced server-side no matter what. (The exact error messages are designed to inform the frontend so it can prompt the user accordingly[\[1\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L34-L41).)

* **LinkedIn Share Bonus Endpoint:** To support the \+1 query bonus for sharing on LinkedIn, the backend provides an endpoint /api/redeem-share. This endpoint is protected (requires a valid Supabase JWT) and, on a POST request, will insert a new row into user\_shares for the user (with the current timestamp) – but **only if** the user hasn’t already gotten a share bonus in the current month[\[18\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L53-L59). If a record already exists for this user/month, it will respond with an error to prevent multiple bonuses. A corresponding GET (or the response) can be used to check if the bonus is available or used. The backend checks the user’s subscription as well – subscribers might not need a bonus, but in any case multiple uses are prevented[\[18\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L53-L59). This logic means the **honor system**: we assume if the user hit this endpoint, they shared the link (full LinkedIn API verification is out of scope). Once this endpoint succeeds, the backend will count that when computing the free query allowance (i.e., effectively 3 queries for that month).

* **Stripe Checkout Session API:** The backend includes an endpoint /api/create-checkout-session to initiate the Stripe checkout for upgrading. This endpoint (POST) is protected by auth and expects a logged-in user. It creates a Stripe **Checkout Session** for a subscription to the “RIA Hunter Pro” plan. Key implementation details:

* It uses the Stripe Secret Key from the environment to create a session with the predefined Price ID for $20/month plan (with 7-day trial)[\[2\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L42-L50).

* The user’s email is passed to Stripe to pre-fill the checkout (for receipt convenience), and **the Supabase user\_id is attached** in two ways: as client\_reference\_id and in subscription\_data.metadata.user\_id[\[7\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L54-L62). This ensures that when Stripe calls our webhook, we know which user the subscription belongs to.

* The session is configured with a success URL and cancel URL that will redirect back to our frontend (we set these to something like https://\<our-app\>/subscription/success and /subscription/cancel)[\[19\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L38-L46). On success, Stripe will redirect the user to our app; on cancel, back to the app without changes. The endpoint returns the Session URL (or ID) which the frontend will use to actually redirect the user to Stripe[\[2\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L42-L50).

* Error handling is implemented to catch Stripe API errors and respond with appropriate JSON errors for the frontend to display if needed[\[2\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L42-L50).

* **Stripe Webhook Processing:** The backend has a **Stripe webhook handler** at /api/stripe-webhook (this route is **not** behind auth middleware, since Stripe needs public access). It is configured to receive events like:

* checkout.session.completed – indicates a user successfully checked out (started a trial or subscription). The handler will read the client\_reference\_id (our user ID) and the subscription object from the event, then insert or update a record in subscriptions table with user\_id, the Stripe customer ID, subscription ID, and an initial status (likely “trialing” if a trial is in effect)[\[7\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L54-L62)[\[20\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L64-L73).

* customer.subscription.created or ...updated – Stripe sends these when the subscription is created/updated (e.g., trial started, trial to active, status changes). The webhook code checks the metadata.user\_id on the subscription and updates the corresponding row’s status and current period end in our DB[\[8\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L78-L86)[\[21\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L100-L108). For example, when a trial converts to active, Stripe will send a subscription.updated with status active – the code will set our subscriptions.status to "active" and update the period end date.

* customer.subscription.deleted – triggers when a subscription is canceled or ends; the code will mark the user’s subscription status as "canceled" in our DB[\[22\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L117-L125)[\[23\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L126-L134).

* invoice.payment\_succeeded / invoice.payment\_failed – in case of payment events (after trial or on renewal). On success, we mark status active (if it wasn’t already)[\[24\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L134-L143)[\[25\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L144-L152); on failure (e.g., card decline), we mark the status as "past\_due"[\[26\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L156-L164)[\[27\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L165-L173) so the frontend could potentially show a warning.  
  The webhook endpoint verifies the Stripe signature using our STRIPE\_WEBHOOK\_SECRET to ensure authenticity[\[28\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L31-L39). This mechanism keeps our subscriptions table in sync with Stripe in real-time. (The events we listen to must be configured in Stripe’s dashboard – see **Configuration** below.)

* **Subscription Status API:** The backend provides a convenient endpoint /api/subscription-status (GET) for the frontend to retrieve the user’s current subscription and usage info in one call. This endpoint, which is protected by auth, looks up the user’s row in subscriptions and determines if they have an active or trialing subscription[\[6\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L20-L28)[\[29\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L34-L42). It also computes the current usage counts (if the user is free-tier) by counting user\_queries and user\_shares for the current month (similar logic as in /api/ask)[\[16\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L38-L46)[\[17\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L58-L66). The response includes:

* isSubscriber: boolean, whether the user is a paying (trial/active) subscriber[\[29\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L34-L42).

* subscription: an object with status (trialing/active/…), current period end, etc., or null if no subscription[\[30\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L72-L80).

* usage: for free users, an object detailing how many queries used, remaining, total allowed this month, and whether the share bonus was used[\[17\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L58-L66)[\[31\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L63-L71). (For subscribers, usage may be null or not needed since they have unlimited queries.)

* unlimited: a convenience boolean (same as isSubscriber, to directly indicate if the user has unlimited access)[\[32\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L72-L81).  
  This endpoint allows the frontend to get all necessary info to decide what to display (e.g. remaining queries, or that the user is Pro). It’s a simple wrapper so the frontend doesn’t have to directly query the database or multiple endpoints. We also enabled CORS for this route (and others) so that if the frontend is on a different domain, it can still call these APIs (by returning Access-Control-Allow-Origin: \* on OPTIONS requests, etc.)[\[33\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L93-L101).

* **Configuration & Environment:** To support these features, ensure the following environment variables are set in the backend:

* **Supabase:** The SUPABASE\_URL and SUPABASE\_SERVICE\_ROLE\_KEY should be present (the service role key is used by supabaseAdmin on the server to bypass RLS)[\[34\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L13-L21). These were likely already in place for previous features, but double-check the values. Also, the Supabase **JWT secret** in your project must be the same one used to sign the access tokens (Supabase sets this automatically; using their client libraries aligns with this).

* **Stripe:** Set STRIPE\_SECRET\_KEY (the private API key) and STRIPE\_WEBHOOK\_SECRET (from the Stripe Dashboard after creating a webhook endpoint) in the environment[\[35\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L18-L26). Also set STRIPE\_PRICE\_ID to the ID of the pricing plan for the Pro subscription[\[35\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L18-L26). In development/testing, use the test keys and test price ID. These keys are required for the checkout and webhook code to function.

* **Frontend URL:** (If not already) set an environment variable for the frontend’s base URL. The code references FRONTEND\_URL for constructing the Stripe redirect URLs[\[19\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L38-L46). In development this might be http://localhost:3000, in production your domain. Ensure this is correctly configured so that after checkout, Stripe knows where to send the user.

* **Google OAuth in Supabase:** In the Supabase dashboard, **enable Google as an auth provider** and input the Google Client ID and Secret for the app[\[36\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L29-L37). This is a one-time setup: you’ll have to create a Google Cloud OAuth app (if not done already) and supply the credentials to Supabase (so that Supabase handles the OAuth flow for Google sign-in). Make sure the redirect URL (e.g., https://\<your-domain\>) is allowed in the Google OAuth consent screen settings[\[36\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L29-L37). This configuration is external to the code; coordinate with the user or admin to complete it.

* **Stripe Webhook Setup:** Using the Stripe Dashboard, add a webhook endpoint for your backend (e.g., https://\<your-backend-domain\>/api/stripe-webhook). Subscribe to events: checkout.session.completed, customer.subscription.created/updated/deleted, and invoice.payment\_succeeded/failed[\[37\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L82-L90). Use the signing secret from this setup as STRIPE\_WEBHOOK\_SECRET. This ensures Stripe will notify your backend on those important events. In test mode, you can also use the Stripe CLI to send test events to your local dev server for verification.

* **Testing & Verification:** With everything set up, the backend agent should verify the flows:

* Create a test user in Supabase (or use an existing one from the frontend after Google login) and simulate hitting the /api/ask endpoint twice to ensure the third attempt yields the 403 limit message (unless upgraded).

* Use Stripe test mode to run through a checkout: call /api/create-checkout-session with a valid user JWT, visit the returned URL, complete the checkout with a test card (this should start a trial subscription). Then verify that the Stripe webhook logic created a subscriptions entry with status "trialing".

* Simulate advancement of the subscription (Stripe’s test mode can send an event to mark trial as active or use the Stripe CLI to trigger a customer.subscription.updated event). Check that the DB status updates to "active". Also test cancellation event if possible.

* Test the /api/redeem-share by calling it once (after login) and verifying a row is created in user\_shares, and that a second call in the same month is correctly rejected.

* Ensure /api/subscription-status returns the expected data structure (e.g., for a free user before any queries, it should show 2 allowed, 2 remaining; after using queries, it decrements; for a subscriber it shows isSubscriber: true and perhaps usage: null or full allowance).

* These verifications ensure the backend is solid before the frontend integration is fully rolled out.

**Conclusion (Backend):** The backend work is essentially **feature-complete**[\[38\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L1-L9)[\[39\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L60-L65). All critical capabilities (auth via Supabase, usage tracking, Stripe subscription handling, and related APIs) are in place according to the plan. The remaining steps mostly involve configuration (Stripe/Supabase settings) and rigorous testing. From here, the backend agent’s role is to address any issues discovered during integration and support the frontend agent by providing clarity on API contracts or making minor adjustments if the frontend requires additional data. No overlapping frontend work should be done by the backend agent – focus on the server-side robustness, while the frontend agent builds the user interface described next.

---

[\[1\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L34-L41) [\[2\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L42-L50) [\[9\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L5-L13) [\[18\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L53-L59) [\[37\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L82-L90) [\[38\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L1-L9) [\[39\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md#L60-L65) GitHub

[https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION\_SUMMARY.md](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/IMPLEMENTATION_SUMMARY.md)

[\[3\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/docs/refactor/Master_Plan_RIA-Hunter-App.md#L99-L108) [\[4\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/docs/refactor/Master_Plan_RIA-Hunter-App.md#L114-L123) GitHub

[https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/docs/refactor/Master\_Plan\_RIA-Hunter-App.md](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/docs/refactor/Master_Plan_RIA-Hunter-App.md)

[\[5\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L54-L61) [\[10\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L88-L96) [\[12\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L94-L101) [\[13\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L40-L48) [\[14\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L54-L62) [\[15\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L6-L14) [\[19\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L38-L46) [\[34\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L13-L21) [\[35\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L18-L26) [\[36\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md#L29-L37) GitHub

[https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe\_Google\_Auth\_Plan\_5\_Aug\_2025\_Backend.docx.md](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/documents/Stripe_Google_Auth_Plan_5_Aug_2025_Backend.docx.md)

[\[6\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L20-L28) [\[11\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L10-L18) [\[16\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L38-L46) [\[17\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L58-L66) [\[29\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L34-L42) [\[30\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L72-L80) [\[31\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L63-L71) [\[32\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L72-L81) [\[33\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts#L93-L101) GitHub

[https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/subscription-status/route.ts)

[\[7\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L54-L62) [\[8\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L78-L86) [\[20\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L64-L73) [\[21\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L100-L108) [\[22\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L117-L125) [\[23\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L126-L134) [\[24\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L134-L143) [\[25\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L144-L152) [\[26\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L156-L164) [\[27\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L165-L173) [\[28\]](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts#L31-L39) GitHub

[https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts](https://github.com/Turnstyle/ria-hunter/blob/d0050a85768df0ba31b0e641ed04fce81a467790/app/api/stripe-webhook/route.ts)

[\[40\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/README.md#L64-L72) [\[42\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/README.md#L24-L31) [\[44\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/README.md#L162-L168) [\[78\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/README.md#L7-L11) GitHub

[https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/README.md](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/README.md)

[\[41\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[43\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[47\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[48\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[50\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[54\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[55\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[56\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[57\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[58\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[59\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[60\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[61\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[62\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[63\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[64\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[70\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) [\[73\]](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat) Google Drive

[https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat](https://drive.google.com/file/d/1WaRNnLbf4S-sEw5i2HkqERVkVRKfJjat)

[\[45\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/contexts/AuthContext.tsx#L22-L31) [\[46\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/contexts/AuthContext.tsx#L58-L67) [\[51\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/contexts/AuthContext.tsx#L42-L50) [\[53\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/contexts/AuthContext.tsx#L69-L77) GitHub

[https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/contexts/AuthContext.tsx](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/contexts/AuthContext.tsx)

[\[49\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/browse/page.tsx#L161-L169) [\[52\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/browse/page.tsx#L66-L74) [\[74\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/browse/page.tsx#L82-L90) [\[76\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/browse/page.tsx#L51-L59) [\[77\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/browse/page.tsx#L90-L98) [\[80\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/browse/page.tsx#L96-L104) GitHub

[https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/browse/page.tsx](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/browse/page.tsx)

[\[65\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/components/subscription/SubscriptionDetails.tsx#L237-L246) [\[66\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/components/subscription/SubscriptionDetails.tsx#L237-L245) [\[75\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/components/subscription/SubscriptionDetails.tsx#L66-L74) GitHub

[https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/components/subscription/SubscriptionDetails.tsx](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/components/subscription/SubscriptionDetails.tsx)

[\[67\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/components/subscription/UpgradeButton.tsx#L33-L41) [\[68\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/components/subscription/UpgradeButton.tsx#L42-L50) [\[69\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/components/subscription/UpgradeButton.tsx#L47-L55) [\[71\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/components/subscription/UpgradeButton.tsx#L22-L30) [\[72\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/components/subscription/UpgradeButton.tsx#L52-L60) [\[79\]](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/components/subscription/UpgradeButton.tsx#L52-L55) GitHub

[https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/components/subscription/UpgradeButton.tsx](https://github.com/Turnstyle/ria-hunter-app/blob/1fd354978e27e3d07b33a786007d65427457feff/app/components/subscription/UpgradeButton.tsx)